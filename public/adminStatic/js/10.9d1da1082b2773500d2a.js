webpackJsonp([10],{KDNz:function(t,e){},Zmf7:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={components:{Uploadimg:a("YAzi").a},data:function(){return{formData:{title:"",img:"",newsId:"",status:1,sort:1},selectCateId:"",category:[],ishow:!1,news:[],selectNewitem:"",page:{pn:1,size:3},count:1}},methods:{handleSubmit:function(){var t=this;this.$axios.post("/ddyj/swiper",this.formData).then(function(e){200==e.code?(t.$message.success(e.msg),setTimeout(function(){t.$router.push("/layout/swiperlist")},500)):t.$message(e.msg)})},handlerevise:function(){var t=this,e=this.$route.params.id;this.$axios.put("/ddyj/swiper/"+e,this.formData).then(function(e){200==e.code?(t.$message.success(e.msg),setTimeout(function(){t.$router.push("/layout/swiperlist")},500)):t.$message(e.msg)})},getCategoty:function(){var t=this;this.$axios.get("/ddyj/category").then(function(e){t.category=e.data})},getNews:function(){var t=this;this.$axios.get("/ddyj/category/"+this.selectCateId+"/news",this.page).then(function(e){t.news=e.data,t.count=e.count})},pageing:function(t){this.page.pn=t,this.getNews()},selectCate:function(){this.ishow=!0,this.getNews()},selectNew:function(t){this.ishow=!1,this.selectNewitem=t,this.formData.newsId=t._id},getData:function(){var t=this,e=this.$route.params.id;this.$axios.get("/ddyj/swiper/"+e).then(function(e){t.formData=e.data;var a=e.data.newsId._id;t.formData.newsId=a,t.getReviseNew()})},getReviseNew:function(){var t=this;this.$axios.get("/ddyj/news/"+this.formData.newsId).then(function(e){t.selectNewitem=e.data,t.selectCateId=e.data.type._id})}},created:function(){this.getCategoty()},computed:{isrevise:function(){return"修改轮播图页"==this.$route.meta.title?(this.getData(),!0):(this.formData={title:"",img:"",newsId:"",status:1,sort:1},!1)}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{staticClass:"mb30",attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/layout/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/layout/swiperlist"}}},[t._v("轮播图列表页")]),t._v(" "),t.isrevise?a("el-breadcrumb-item",[t._v("修改轮播图页")]):a("el-breadcrumb-item",[t._v("添加轮播图页")])],1),t._v(" "),a("el-card",[a("el-form",{ref:"form",staticClass:"table-ys",attrs:{model:t.formData,"label-width":"100px","label-position":"left"}},[a("el-form-item",{attrs:{label:"轮播图标题",required:""}},[a("el-input",{model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"轮播图头图",required:""}},[a("Uploadimg",{model:{value:t.formData.img,callback:function(e){t.$set(t.formData,"img",e)},expression:"formData.img"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否显示"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-text":"显示","inactive-text":"不显示"},model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"排序号"}},[a("el-input-number",{attrs:{min:1},model:{value:t.formData.sort,callback:function(e){t.$set(t.formData,"sort",e)},expression:"formData.sort"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"选择新闻分类"}},[a("el-select",{model:{value:t.selectCateId,callback:function(e){t.selectCateId=e},expression:"selectCateId"}},t._l(t.category,function(e,s){return a("el-option",{key:s,attrs:{value:e._id,label:e.title},nativeOn:{click:function(e){return t.selectCate(e)}}})}))],1),t._v(" "),a("el-dialog",{attrs:{title:"选择分类下新闻",visible:t.ishow},on:{"update:visible":function(e){t.ishow=e}}},[a("el-table",{attrs:{data:t.news}},[a("el-table-column",{attrs:{property:"title",label:"新闻标题",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{property:"author.nicheng",label:"作者",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"新闻头图",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"avatar-item",attrs:{src:t.row.img,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"新闻内容",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"table-content-ys",domProps:{textContent:t._s(e.row.contentText)}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.selectNew(e.row)}}},[t._v("选择")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":t.page.size,total:t.count},on:{"current-change":t.pageing}})],1),t._v(" "),t.selectNewitem?a("el-form-item",{attrs:{label:"关联的新闻"}},[a("div",{staticClass:"relevance claerfix"},[a("div",{staticClass:" fll"},[a("img",{staticClass:"re-img",attrs:{src:t.selectNewitem.img}})]),t._v(" "),a("div",{staticClass:"re-info fll"},[a("div",{staticClass:"re-title"},[t._v("标题："+t._s(t.selectNewitem.title))]),t._v(" "),a("div",{staticClass:"re-content"},[t._v("内容："+t._s(t.selectNewitem.contentText))])])])]):t._e(),t._v(" "),a("el-form-item",[t.isrevise?a("el-button",{attrs:{type:"primary"},on:{click:t.handlerevise}},[t._v("立即修改")]):a("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("立即创建")]),t._v(" "),a("el-button",{on:{click:function(e){t.$router.push("/layout/swiperlist")}}},[t._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(s,i,!1,function(t){a("KDNz")},"data-v-51cef085",null);e.default=l.exports}});
//# sourceMappingURL=10.9d1da1082b2773500d2a.js.map